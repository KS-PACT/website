<!doctype html>
<html>
  <head>
    <title>Hardware Request</title>
  </head>
  <body>
    <%- include header.ejs %>
		<div class="container">
			<div id = "alert_placeholder"></div>
			<div class="main-card">
				<form>
					<div class="form-group row">
						<label for="serialNum" class="col-sm-2 col-form-label">Serial Number</label>
						<div class="col-sm-10">
							<input type="serialNum" class="form-control" id="serialNum" placeholder="Serial Number" required>
						</div>
					</div>
					<div class="form-group row">
						<label for="name" class="col-sm-2 col-form-label">Name</label>
						<div class="col-sm-10">
							<input type="name" class="form-control" id="name" placeholder="Name" required>
						</div>
					</div>
					<div class="form-group row">
						<label for="description" class="col-sm-2 col-form-label">Description</label>
						<div class="col-sm-10">
							<textarea class="span6" rows="3" placeholder="Description" id="description" required></textarea>
						</div>
					</div>
					<button class="btn btn-primary" type="button" id="submit-btn">
						Submit
					</button>
				</form>
			</div>
		</div>
		
		<script type="text/javascript">
			// Send data to server functions
			function addHardware() {
				console.log("There is something wrong inside addHardware()");
				$.ajax({
					type: 'post',
					url: '/hardware_add',
					data: { 'action': 'add', 'serial_num': $("#serialNum").val(), 'name': $("#name").val(), 'description': $("#description").val() },
					//data: { 'action': 'add' },
					dataType: "json",
					success: function (data) {
						console.log("Status: ", data.status);
						if(data.status == "Success") {
							bootstrap_alert.success('You correctly added a hardware resource.');
						}
						else {
							bootstrap_alert.error(data.status);
						}
					},
					error: function (xhr, status, err) {
						console.error('text status '+status+', err '+err);
					}
				});
			}

			// Handle notifications
			bootstrap_alert = function() {}
			bootstrap_alert.success = function(message) {
				$('#alert_placeholder').html('<div class="alert alert-success"><strong>Success!</strong><span> '+message+'</span></div>');
			}
			bootstrap_alert.error = function(message) {
				$('#alert_placeholder').html('<div class="alert alert-danger"><strong>Error:</strong><span> '+message+'</span></div>');
			}

			// Handle on click event functions
			$('#submit-btn').on('click', function() {
				console.log("Submit button was clicked");
				addHardware();
			});
		</script>
  </body>
</html>
